(()=>{"use strict";var e,t={7153:(e,t,r)=>{var n=r(7378),a=r(1542),l=r(4097),o="FETCH_INITIAL_DATA_REQUESTED",c="FETCH_INITIAL_DATA_SUCCESS",u="ADD_DEPOT_CAR_REQUESTED",i="ADD_DEPOT_CAR_SUCCESS",s="ADD_DEPOT_CAR_FAILURE",m="CLEAR_MESSAGES",f="REMOVE_DEPOT_CAR_REQUESTED",d="REMOVE_DEPOT_CAR_SUCCESS",p="REMOVE_DEPOT_CAR_FAILURE",y=function(){return{type:o}},E=function(){return{type:m}};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){var t=e.cars,r=e.depots;return Array.isArray(t)?t.map((function(e){return b(b({},e),{},{entries:r.flatMap((function(e){return e.cars})).filter((function(t){return t.carId===e.id}))})})):[]},w=function(e){var t=e.gasStations,r=e.fuelTypes;return t&&r?t.map((function(e){return b(b({},e),{},{fuelTypes:e.fuelTypes.map((function(e){return b(b({},e),{},{name:r.find((function(t){return e.fuelTypeId===t.id})).name})}))})})):[]},O=function(e){return e.depots||[]},T=function(e){var t=O(e),r=t.reduce((function(e,t){return t.cars.length>e.cars.length?t:e}),t[0]);return r?[r]:[]},x=function(e){var t=e.depots,r=e.cars,n=e.fuelTypes;return t?t.flatMap((function(e){return e.cars})).map((function(e){return b(b({fuelType:n.find((function(t){return t.id===e.fuelTypeId})).name},r.find((function(t){return t.id===e.carId}))),e)})):[]},S=function(e){return x(e).filter((function(e){return-1!==e.fuelType.toLowerCase().indexOf("дизель")&&-1!==e.type.toLowerCase().indexOf("седан")}))},A=function(e){return function(t){return x(t).filter((function(t){return-1!==t.fuelType.toLowerCase().indexOf(e.toLowerCase())}))}},j=function(e){var t=x(e),r=w(e),n=r.filter((function(e){return e.isOpen})).reduce((function(e,r,n){var a=e.index,l=e.count,o=0;return r.fuelTypes.forEach((function(e){o+=t.filter((function(t){return t.fuelTypeId===e.id})).length})),o>l&&(a=n,l=o),{index:a,count:l}}),{index:0,count:0}),a=n.index,l=n.count;return r[a]?[b(b({},r[a]),{},{count:l})]:[]},N=function(e){return e.fuelTypes||[]},C=function(e){return e.successMessage},I=function(e){return e.errorMessage};function R(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){return[e.type,e.model,e.entries.length]},k=function(e){return[e.title,e.location,e.isOpen?"Открыто":"Закрыто",e.fuelTypes.map((function(e){return e.name})).join(", ")]},D=function(e){return[].concat(R(k(e)),[e.count])},M=function(e){return[e.title,e.location,e.cars.length]},L=function(e){return[e.type,e.model,e.fuelType,e.licensePlateNumber]},F=function(e){return[].concat(R(L(e)),[e.locations||"Нигде"])};function V(e){var t=e.headers,r=e.selector,a=e.renderRow,o=(0,l.v9)(r);return n.createElement("table",{className:"table table-hover table-dark"},n.createElement("thead",null,n.createElement("tr",null,Array.isArray(t)&&t.map((function(e){return n.createElement("th",{key:e},e)})))),n.createElement("tbody",null,Array.isArray(o)&&o.map(a).map((function(e){return n.createElement("tr",{key:e.join()},e.map((function(e){return n.createElement("td",{key:e},e)})))}))))}function U(){return n.createElement(n.Fragment,null,n.createElement("h2",{className:"text-white mt-5"},"Созданы обобщенные списки"),n.createElement("h3",{className:"text-white mt-4"},"Сведения об автомобилях"),n.createElement(V,{headers:["Вид","Модель","Кол-во на базах"],selector:g,renderRow:_}),n.createElement("h3",{className:"text-white mt-4"},"Сведения об АЗС"),n.createElement(V,{headers:["Название","Локация","Состояние","Виды топлива"],selector:w,renderRow:k}),n.createElement("h3",{className:"text-white mt-4"},"Сведения об автобазах"),n.createElement(V,{headers:["Название","Локация","Кол-во машин"],selector:O,renderRow:M}))}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(){var e,t,r=H((0,n.useState)(""),2),a=r[0],l=r[1],o=H((0,n.useState)(""),2),c=o[0],u=o[1],i=H((0,n.useState)(""),2),s=i[0],m=i[1];return n.createElement(n.Fragment,null,n.createElement("h2",{className:"text-white mt-5"},"Реализованы следующие запросы"),n.createElement("div",{className:"row mt-4"},n.createElement("div",{className:"col"},n.createElement("h3",{className:"text-white",id:"depotCarGasStationsHeader"},"На каких АЗС можно заправить конкретный автомобиль")),n.createElement("div",{className:"col"},n.createElement("input",{value:a,onChange:function(e){return l(e.target.value)},type:"text",className:"form-control",placeholder:"Регистрационный знак","aria-labelledby":"depotCarGasStationsHeader"}))),n.createElement(V,{headers:["Тип","Модель","Вид топлива","Регистрационный знак","Где заправить?"],selector:(t=a,function(e){var r=x(e).filter((function(e){return-1!==e.licensePlateNumber.toLowerCase().indexOf(t.toLowerCase())})),n=w(e);return r.map((function(e){var t=n.filter((function(t){return t.isOpen&&t.fuelTypes.find((function(t){return t.fuelTypeId===e.fuelTypeId}))})).map((function(e){return e.location})).join(", ");return b(b({},e),{},{locations:t})}))}),renderRow:F}),n.createElement("h3",{className:"text-white mt-4"},"Сколько автомобилей с кузовом седан заправляются дизельным топливом"),n.createElement(V,{headers:["Тип","Модель","Вид топлива","Регистрационный знак"],selector:S,renderRow:L}),n.createElement("div",{className:"row mt-4"},n.createElement("div",{className:"col"},n.createElement("h3",{className:"text-white",id:"gasStationFuelTypeHeader"},"Список АЗС, на которых отсутствует заданный сорт бензина")),n.createElement("div",{className:"col"},n.createElement("input",{value:s,onChange:function(e){return m(e.target.value)},type:"text",className:"form-control",placeholder:"Сорт бензина","aria-labelledby":"gasStationFuelTypeHeader"}))),n.createElement(V,{headers:["Название","Локация","Состояние","Виды топлива"],selector:(e="бензин "+s,function(t){return w(t).filter((function(t){return t.fuelTypes.some((function(t){return-1!==t.name.toLowerCase().indexOf(e.toLowerCase())}))}))}),renderRow:k}),n.createElement("h3",{className:"text-white mt-4"},"АЗС, обслуживающая максимальное количество автомобилей"),n.createElement(V,{headers:["Название","Локация","Состояние","Виды топлива","Кол-во машин"],selector:j,renderRow:D}),n.createElement("div",{className:"row mt-4"},n.createElement("div",{className:"col"},n.createElement("h3",{className:"text-white",id:"carFuelTypeHeader"},"Автомобили, заправляющиеся заданным сортом бензина")),n.createElement("div",{className:"col"},n.createElement("input",{value:c,onChange:function(e){return u(e.target.value)},type:"text",className:"form-control",placeholder:"Сорт бензина","aria-labelledby":"carFuelTypeHeader"}))),n.createElement(V,{headers:["Тип","Модель","Вид топлива","Регистрационный знак"],selector:A("бензин "+c),renderRow:L}),n.createElement("h3",{className:"text-white mt-4"},"Автобаза с максимальным количеством автомобилей"),n.createElement(V,{headers:["Название","Локация","Кол-во машин"],selector:T,renderRow:M}))}var K=r(5638),$=r.n(K);function G(e){var t=e.message,r=(0,l.I0)();return a.createPortal(n.createElement("div",{className:"alert alert-success alert-dismissible fade show",role:"alert"},n.createElement("strong",null,"Отлично!")," ",t,n.createElement("button",{onClick:function(){return r(E())},type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},n.createElement("span",{"aria-hidden":"true"},"×"))),document.getElementById("alerts"))}function Q(e){var t=e.message,r=(0,l.I0)();return a.createPortal(n.createElement("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert"},n.createElement("strong",null,"Ошибка!")," ",t,n.createElement("button",{onClick:function(){return r(E())},type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},n.createElement("span",{"aria-hidden":"true"},"×"))),document.getElementById("alerts"))}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(){var e=(0,l.I0)(),t=(0,l.v9)(N),r=(0,l.v9)(O),a=(0,l.v9)(g),o=(0,l.v9)(C),c=(0,l.v9)(I),i=Z((0,n.useState)(""),2),s=i[0],m=i[1],f=Z((0,n.useState)(),2),d=f[0],p=f[1],y=Z((0,n.useState)(),2),E=y[0],h=y[1],b=Z((0,n.useState)(),2),v=b[0],w=b[1],T=!(s&&d&&E&&v);return n.createElement(n.Fragment,null,c&&n.createElement(Q,{message:c}),o&&n.createElement(G,{message:o}),n.createElement("h2",{className:"text-white mt-5"},"Предусмотрена возможность добавления автомобилей в заданную автобазу"),n.createElement("table",{className:"table table-hover table-dark"},n.createElement(X,null),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",null,n.createElement("input",{className:"form-control form-control-sm",type:"text",placeholder:"прим. 1111АА-1","aria-labelledby":"regPlateTh",value:s,onChange:function(e){return m(e.target.value)}})),n.createElement("td",null,n.createElement(W,{placeholderOption:"Выберите модель",ariaLabelledBy:"modelTh",itemsList:a,getKey:function(e){return e.id},getValue:function(e){return e.id},getText:function(e){return e.model},selectValue:d,selectValueSetter:p})),n.createElement("td",null,n.createElement(W,{placeholderOption:"Выберите автобазу",ariaLabelledBy:"depotTh",itemsList:r,getKey:function(e){return e.id},getValue:function(e){return e.id},getText:function(e){return"".concat(e.title," (").concat(e.location,")")},selectValue:E,selectValueSetter:h})),n.createElement("td",null,n.createElement(W,{placeholderOption:"Выберите вид топлива",ariaLabelledBy:"fuelTypeTh",itemsList:t,getKey:function(e){return e.id},getValue:function(e){return e.id},getText:function(e){return e.name},selectValue:v,selectValueSetter:w}))))),n.createElement("button",{type:"button",className:"btn btn-dark w-100",onClick:function(){e({type:u,payload:{licensePlateNumber:s,carId:d,depotId:E,fuelTypeId:v}}),$()("html, body").animate({scrollTop:0},"slow"),m(""),p(""),h(""),w("")},disabled:T},"Добавить автомобиль"))}function W(e){var t=e.ariaLabelledBy,r=e.placeholderOption,a=e.itemsList,l=e.getKey,o=e.getValue,c=e.getText,u=e.selectValue,i=e.selectValueSetter;return n.createElement("select",{value:u,onChange:function(e){return i(e.target.value)},className:"form-control form-control-sm","aria-labelledby":t},n.createElement("option",null,r),a.map((function(e){return n.createElement("option",{key:l(e),value:o(e)},c(e))})))}function X(){return n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{id:"regPlateTh"},"Регистрационный знак"),n.createElement("th",{id:"modelTh"},"Модель"),n.createElement("th",{id:"depotTh"},"Депо"),n.createElement("th",{id:"fuelTypeTh"},"Вид топлива")))}function Y(){var e=(0,l.I0)(),t=(0,l.v9)(x);return n.createElement(n.Fragment,null,n.createElement("h2",{className:"text-white mt-5"},"Предусмотрена возможность удаления автомобилей"),n.createElement("table",{className:"table table-hover table-dark"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Тип"),n.createElement("th",null,"Модель"),n.createElement("th",null,"Вид топлива"),n.createElement("th",null,"Регистрационный знак"),n.createElement("th",null,"Действие"))),n.createElement("tbody",null,t.map((function(t){return n.createElement("tr",{key:t.id},n.createElement("td",null,t.type),n.createElement("td",null,t.model),n.createElement("td",null,t.fuelType),n.createElement("td",null,t.licensePlateNumber),n.createElement("td",null,n.createElement("button",{onClick:function(){return r=t.id,e({type:f,payload:r}),void $()("html, body").animate({scrollTop:0},"slow");var r},type:"button",className:"btn btn-outline-light"},"Удалить")))})))))}function ee(){var e=(0,l.I0)();return(0,n.useEffect)((function(){e(y());var t=setInterval(e,5e3,y());return function(){return clearInterval(t)}}),[]),n.createElement("div",{className:"container mb-4"},n.createElement("h1",{className:"text-white"},"Программная система, предназначенная отслеживать заправку автомобилей на разных автозаправочных станциях (АЗС)"),n.createElement(U,null),n.createElement(B,null),n.createElement(J,null),n.createElement(Y,null))}var te=r(5106),re=r(3457);function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oe=r(3960),ce=r(4206),ue=r.n(ce),ie="https://dry-shore-97845.herokuapp.com",se=function(){return ue().get(ie)},me=function(e){return ue().post(ie,e)},fe=function(e){return ue().delete("".concat(ie,"/").concat(e))},de=regeneratorRuntime.mark(he),pe=regeneratorRuntime.mark(be),ye=regeneratorRuntime.mark(ve),Ee=regeneratorRuntime.mark(ge);function he(e){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,oe.RE)(se);case 3:return t=e.sent,r=t.data,e.next=7,(0,oe.gz)({type:c,payload:r});case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,(0,oe.gz)({type:"FETCH_INITIAL_DATA_FAILURE"});case 13:case"end":return e.stop()}}),de,null,[[0,9]])}function be(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,oe.RE)(me,e.payload);case 3:return t=n.sent,r=t.data,n.next=7,(0,oe.gz)({type:i,payload:r});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,(0,oe.gz)({type:s});case 13:case"end":return n.stop()}}),pe,null,[[0,9]])}function ve(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,oe.RE)(fe,e.payload);case 3:return t=n.sent,r=t.data,n.next=7,(0,oe.gz)({type:d,payload:r});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,(0,oe.gz)({type:p});case 13:case"end":return n.stop()}}),ye,null,[[0,9]])}function ge(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,oe.$6)([(0,oe.Fm)(o,he),(0,oe.Fm)(u,be),(0,oe.Fm)(f,ve)]);case 2:case"end":return e.stop()}}),Ee)}var we=(0,re.ZP)(),Oe=(0,te.MT)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return ae(ae({},e),t.payload);case i:return ae(ae({},e),{},{successMessage:"Машина успешно создана",errorMessage:null});case s:return ae(ae({},e),{},{successMessage:null,errorMessage:"Ошибка при создании машины"});case m:return ae(ae({},e),{},{successMessage:null,errorMessage:null});case d:return ae(ae({},e),{},{successMessage:"Машина успешно удалена",errorMessage:null});case p:return ae(ae({},e),{},{successMessage:null,errorMessage:"Ошибка при удалении машины"});default:return e}}),(0,te.md)(we));we.run(ge);const Te=Oe;a.render(n.createElement(l.zt,{store:Te},n.createElement(ee,null)),document.getElementById("root"))}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(l.exports,l,l.exports,n),l.loaded=!0,l.exports}n.m=t,e=[],n.O=(t,r,a,l)=>{if(!r){var o=1/0;for(i=0;i<e.length;i++){for(var[r,a,l]=e[i],c=!0,u=0;u<r.length;u++)(!1&l||o>=l)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(c=!1,l<o&&(o=l));c&&(e.splice(i--,1),t=a())}return t}l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[r,a,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,l,[o,c,u]=r,i=0;for(a in c)n.o(c,a)&&(n.m[a]=c[a]);for(u&&u(n),t&&t(r);i<o.length;i++)l=o[i],n.o(e,l)&&e[l]&&e[l][0](),e[o[i]]=0;n.O()},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.O(void 0,[293],(()=>n(1202)));var a=n.O(void 0,[293],(()=>n(7153)));a=n.O(a)})();